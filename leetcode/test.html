<!DOCTYPE html>
<html>
<head>
	<title>test</title>
</head>
<body>
<script type="text/javascript">
var longestPalindrome = function(s) {
    var length = s.length,
    	ss = '#'+s.split('').join('#')+'#',
    	count  = 1,  index = 0,
    	begin  = 0, i,j;
    while (begin < ss.length-1){
    	if(ss.charAt(begin) === ss.charAt(begin+2)){
    		i = findPalindrome(ss, begin, begin+2);
    		if( (begin+1-i)*2+1 > count ){
    			count = (begin+1-i)*2;
    			index = i;
			}
    	}
    	begin++;
    }
    return ss.substring(index, index+count).replace(/#/g,'');
};
function findPalindrome( s,i,j ){
	while( !!s.charAt(i) && ( s.charAt(i) === s.charAt(j) )){
		i--;
		j++;
	}
	return i;
}

	s = 'aba';
	console.log(longestPalindrome(s));
</script>
</body>
</html>